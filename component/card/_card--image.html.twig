{# Card Image #}

{# If active, render #}
{% if card_image %}

    {# Set card image classes #}
    {% set card_image_classes = [
        'card-header',
        position_container ? 'd-flex ' ~ position_container : null,
        text_alignment ?: null,
        text_color ?: null,
        'g-0',
    ] | filter(v => v) | join(' ') %}

    {# Set presentation classes based on conditions #}
    {% set presentation_classes = [
        'card-img',
        image_size ?: null,
    ] | filter(v => v) | join(' ') %}

    {# Content #}
    <div class="{{ card_image_classes }}">
        <div role="presentation" class="{{ presentation_classes }}">

            {# Card Image #}
            {{ card_image }}

            {# Card Image Caption #}
            {% if visibility == 'visible' and content.field_image is not empty %}
                {% for item in content.field_image %}
                    {% if item['#item'].alt %}
                        <figcaption class="{{ visibility }} px-3">
                            <p class="h6 title figcaption {{ text_alignment ?: '' }} {{ text_color ?: '' }}">{{ item['#item'].alt }}</p>
                        </figcaption>
                    {% endif %}
                {% endfor %}
            {% endif %}

        </div>
    </div>

{% endif %}