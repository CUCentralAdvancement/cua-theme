{#
Macro: render_title

Purpose:
  Renders a heading (h1–h6) with optional visual and accessibility-related features.
  Allows for alignment, color, padding, link wrapping, and screen reader visibility.
  Designed to be reusable across card components, hero blocks, etc.

Usage Example:
  {% import '@cua_theme/component/macros/card_title.html.twig' as titleMacros %}
  {{ titleMacros.render_title(
    label,
    '', '',                    # title_prefix, title_suffix (handled in template)
    null,                      # center_content (legacy, optional)
    'text-center',             # text_alignment
    'text-blue-light',         # text_color
    'p-3',                     # padding
    true,                      # hide_from_screen_readers
    [],                        # links (optional)
    'unique-id',               # title_id
    3                          # heading level (e.g., <h3>)
  ) }}

Parameters:
  - label: (string) Required title text
  - title_prefix / title_suffix: Contextual wrapper content (from Drupal)
  - center_content: Optional legacy class for layout centering (pass null if unused)
  - text_alignment: Alignment class (e.g., 'text-center', 'text-start')
  - text_color: Optional text color class
  - padding: Optional spacing class
  - hide_from_screen_readers: Boolean to set aria-hidden
  - links: Optional array of link objects (only first one used)
  - title_id: Optional HTML ID attribute for heading
  - heading_level: Level of heading element to render (defaults to <h2>)
#}

{% macro render_title(
    label,
    title_prefix = '',
    title_suffix = '',
    center_content = null,
    text_alignment = null,
    text_color = null,
    padding = null,
    hide_from_screen_readers = false,
    links = [],
    title_id = '',
    heading_level = 3
    ) %}

    {# Build the full class list for the heading tag #}
    {# Includes base typography, plus optional alignment, color, padding #}
    {% set title_classes = [
        'display-4',
        'card-text',
        'lead',
        'title',
        center_content,
        text_alignment,
        text_color,
        padding
    ] | filter(v => v) | join(' ') %}

    {# Class list for the optional <a> link inside heading #}
    {# Avoid duplicating heading styles — just apply minimal necessary styling #}
    {% set title_link_classes = [
        'title-link',
        text_color
    ] | filter(v => v) | join(' ') %}

    {# Compile the actual heading tag name (e.g., 'h2', 'h3') #}
    {% set heading_tag = 'h' ~ heading_level %}

    {{ title_prefix }}

    {# Only render heading if label exists #}
    {% if label is not empty %}

        {# If links are provided, wrap label in <a> tag inside the heading #}
        {% if links|length %}
            {% set firstLink = links[0] %}
            <{{ heading_tag }}
            class="{{ title_classes }}"
            {% if title_id %}id="{{ title_id }}"{% endif %}>
            <a
                    class="{{ title_link_classes }}"
                    href="{{ firstLink.url }}"
                    title="{{ firstLink.title }}"
                    {% if hide_from_screen_readers %}aria-hidden="true"{% endif %}>
                {{ label }}
            </a>
            </{{ heading_tag }}>

            {# If no link is present, render plain heading with label only #}
        {% else %}
            <{{ heading_tag }}
            class="{{ title_classes }}"
            {% if title_id %}id="{{ title_id }}"{% endif %}
            {% if hide_from_screen_readers %}aria-hidden="true"{% endif %}>
            {{ label }}
            </{{ heading_tag }}>
        {% endif %}

    {% endif %}

    {{ title_suffix }}

{% endmacro %}