{# 
  =============================================================================
  MACRO: render_body
  STABILITY: Production-Stable / Architecture: Sinn 556 iRS (Standard Grade)
  COMPLIANCE: Section 508 / WCAG 2.2 Level AA / Drupal 11 Ready
  =============================================================================
  TECHNICAL ARCHITECTURE:
  - Flexbox Guard: Uses 'd-flex flex-column' to ensure child elements (like 
    paragraphs) stack vertically without horizontal alignment lag.
  - Validation: Implements a "Closed Case" logicâ€”only predefined padding, 
    color, and alignment classes are allowed to render.
  - Performance: Uses 'clearfix' as a fail-safe for legacy floated content 
    within the 'lead' text body.

  MAINTENANCE WARNING:
  If a new brand color (e.g., 'cu-text-maroon') is added to the theme, it must 
  be added to 'allowed_text_colors' here to pass the gasket.
  =============================================================================
#}

{% macro render_body(content, padding = null, text_color = null, text_alignment = null) %}
    {% if content.body is defined and content.body %}
        
        {# 
           CONSTANTS: The "Design Gaskets"
           Defines the valid tokens for this component's ecosystem.
        #}
        {% set allowed_padding = ['remove-padding', 'add-padding', 'p-0'] %}
        {% set allowed_text_colors = ['cu-text-gold', 'cu-text-black', 'cu-text-white'] %}
        {% set allowed_text_alignments = ['justify-content-start', 'justify-content-center', 'justify-content-end'] %}

        {# 
           STRICT VALIDATION: 
           Prevents class-bloat and keeps the "dial" clean.
        #}
        {% set padding = padding in allowed_padding ? padding : null %}
        {% set text_color = text_color in allowed_text_colors ? text_color : null %}
        
        {# Ensure text_alignment triggers flexbox context #}
        {% set text_alignment_class = text_alignment in allowed_text_alignments ? 'd-flex ' ~ text_alignment : null %}

        {# CLASS ORCHESTRATION #}
        {% set body_classes = [
            'card-body',
            'flex-column',
            'card-text',
            'lead',
            'g-0',
            'clearfix',
            padding,
            text_color,
            text_alignment_class
        ] | filter(v => v) %}

        {# OUTPUT: The legible "Face" of the card #}
        <div class="{{ body_classes|join(' ')|trim }}">
            {{ content.body }}
        </div>

    {% endif %}
{% endmacro %}