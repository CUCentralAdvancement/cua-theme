{# 
  =============================================================================
  COMPONENT: Structural Spacer
  STABILITY: Production-Stable / Architecture: Sinn 556 iRS Equivalent (No-Lag)
  COMPLIANCE: Section 508 / WCAG 2.2 Level AA / ADA Title II (Fully Hidden)
  =============================================================================
  TECHNICAL ARCHITECTURE:
  - Accessibility: aria-hidden="true" on the outer wrapper ensures that AT 
    (Assistive Tech) doesn't announce an empty region.
  - Utility: Leverages the 'size' variable to map to theme-specific spacing 
    tokens (e.g., spacer-sm, spacer-xl).
  - Admin UX: Provides a visual "ghost" label in edit mode to prevent 
    lost-block syndrome.

  MAINTENANCE WARNING:
  Ensure the 'size' variable corresponds to CSS classes defined in 
  cua_theme/spacer. If using Bootstrap spacing (mt-5, etc.), 
  those should be injected via 'utility_classes'.
  =============================================================================
#}

{{ attach_library('cua_theme/spacer') }}

{# 1. ID GENERATION: Clean, targetable, and stable #}
{% set unique_id = 'spacer-' ~ elements.content['#block_content'].id()|default(random(1000)) %}

{# 2. CLASS ORCHESTRATION: The "invisible" case #}
{% set spacer_classes = [
    'block',
    'block-' ~ configuration.provider|clean_class,
    'block-' ~ plugin_id|clean_class,
    'spacer',
    id ? 'block--' ~ id|replace({"_": "-"})|clean_class
]|merge(utility_classes is iterable ? utility_classes : [])|join(' ')|trim %}

{# 
   OUTER WRAPPER: 
   aria-hidden="true" is applied at the root to ensure this block 
   is a total "ghost" to screen readers.
#}
<div{{ attributes
    .without('id')
    .setAttribute('id', unique_id)
    .addClass(spacer_classes)
    .setAttribute('aria-hidden', 'true')
}}>

    {{ title_prefix }}
    {{ title_suffix }}

    {# INTERNAL SPACING ELEMENT #}
    <div class="spacer {{ size }} g-0">

        {# 
           ADMIN "GHOST" LABEL: 
           This is the "Notes and Names" for your CMS editors. 
           It only renders if 'is_admin' is true, providing a 
           non-interactive visual marker in the layout.
        #}
        {% if is_admin %}
            <div class="spacer-admin-label small text-center p-2 border border-dashed" aria-hidden="true">
                <i class="fa-solid fa-arrows-up-down me-1"></i>
                <strong>{{ label }}</strong>: {{ 'Vertical Space'|t }} ({{ size }})
            </div>
        {% endif %}

    </div>
</div>